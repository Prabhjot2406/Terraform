# STEP 1: CREATE 4 FILES 

    - S3
    - DYNAMO_DB   (need lock ID in dynamoDB)
    - PROVIDER     (Specify region)
    - TERRAFORM    (AWS Provider)

PERFORM terraform init, validate, plan, apply

CHECK ALL THE RESOURCES ARE IN PLACE OR NOT.

# STEP 2: update BACKEND in terraform file.

backend "s3" {
    bucket = "state-lockID-S3-bucket"      # will use bucket state-lockID-S3-bucket 
    key    = "terraform.tfstate"           # store statefile in teh bucket 
    region = "us-east-1"                   # use region this one 
    dynamodb_table = "state-lockID-dynamodb-table"   # use this table for state lockID
  }

  this will specify that use S3 bucket for the state management. After, doing any changes to the terraform file always do init, So after doing terraform init, this is the console output.


Now, I have deleted all the state files still I can do terraform state list to see the state. Without even having the state file in the local repo. 

# STEP 3: Now, Let's test LockID key



NOW ALL THE RESOURCES ARE READY, Now specify the the lockstate key file and dynamoDB table in S3.









## QUESTIONS

1) When does a terraform state file is created?

    The Terraform state file (terraform.tfstate) is created the first time you successfully apply your infrastructure with Terraform.


2) When does a terraform backup file is created?

    The Terraform backup file (usually named terraform.tfstate.backup) is automatically generated by Terraform when it detects that the state file (terraform.tfstate) will be modified by a command that could potentially break or corrupt the state.

    ðŸš€ What happens behind the scenes:

    - Terraform detects that the command will change the state.
    - Before modifying the actual terraform.tfstate, it copies the current state into a     new file named:  terraform.tfstate.backup
    - The .backup file is saved in the same directory as the main .tfstate file.

3) so this mean that backup file is one step behind the main state file?

    -Yes, exactly â€” the backup file is always one step behind the main Terraform state file.

    What this means:
    
    -The file terraform.tfstate.backup represents the previous state just before the most recent state-changing operation.
    
    -The file terraform.tfstate is the current/latest state after the operation.

     Example flow:

     -Initial terraform apply creates terraform.tfstate (no backup yet).

     -You run terraform import:

        Terraform sees this will change the state.
        It copies terraform.tfstate â†’ terraform.tfstate.backup
        Then it updates terraform.tfstate with the new resource.

        Now you have:

            -terraform.tfstate: contains the newly imported resource.
            -terraform.tfstate.backup: contains the state before the import.

     Why this is useful:

        -If something goes wrong (e.g., a wrong resource was imported, or the state got corrupted), you can restore the previous state like this:

                cp terraform.tfstate.backup terraform.tfstate
